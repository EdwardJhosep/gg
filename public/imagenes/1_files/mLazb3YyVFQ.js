;/*FB_PKG_DELIM*/

__d("useShouldShowPlaybackErrorFallback",["I64","LSIntEnum","MAWVideoAudioPlaybackErrorHandlerUtils","MessagingAttachmentType","cr:12242","useEmptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(e=b("cr:12242"))!=null?e:c("useEmptyFunction");function a(a,b){b=(b=j(a,b))!=null?b:{};b=b.validationResult;a=a.attachmentType;a=(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO));if(!a)return!1;a=d("MAWVideoAudioPlaybackErrorHandlerUtils").isPlaybackErrorFallbackEnabled();if(!a)return!1;b=(a=b)!=null?a:{};a=b.mimeType;return a==="invalid-mp4"}g["default"]=a}),98);
__d("useShouldShowUnsupportedCodecFallback",["I64","LSIntEnum","MAWVideoAudioPlaybackErrorHandlerUtils","MessagingAttachmentType","UserAgent","cr:12242","useEmptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(e=b("cr:12242"))!=null?e:c("useEmptyFunction"),k=Object.freeze({Chrome:["H263","Vvc"],Edge:["H263","Vvc"],Firefox:["H263","Vvc","Hevc"],Safari:["H263","Vvc","Vp9","Av1"]});function l(a){if(a==null)return!0;if(c("UserAgent").isBrowser("Chrome"))return k.Chrome.includes(a)===!1;else if(c("UserAgent").isBrowser("Firefox"))return k.Firefox.includes(a)===!1;else if(c("UserAgent").isBrowser("Edge"))return k.Edge.includes(a)===!1;else if(c("UserAgent").isBrowser("Safari"))return k.Safari.includes(a)===!1;return!0}function a(a,b){b=(b=j(a,b))!=null?b:{};b=b.validationResult;a=a.attachmentType;a=(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO));if(!a)return!1;a=d("MAWVideoAudioPlaybackErrorHandlerUtils").isPlaybackErrorFallbackEnabled();if(!a)return!1;b=(a=b)!=null?a:{};a=b.videoStreamType;return l(a)===!1}g["default"]=a}),98);
__d("MAWVideoAudioPlaybackErrorHandlerUtils",["fbt","BaseMiddot.react","I64","LSIntEnum","MWXLink.react","MessagingAttachmentType","ReQL","ReQLSuspense","qex","react","useMAWMediaValidationResultState","useMWV2MediaViewerSecurePlayableUrl","useReStore","useShouldShowPlaybackErrorFallback","useShouldShowUnsupportedCodecFallback"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n=(m||d("react")).c,o=i||(i=c("react"));function p(a){if(a===!0){return(a=c("qex")._("3007"))!=null?a:!1}return(a=c("qex")._("3008"))!=null?a:!1}function a(a,b,e,f){var g,i,j=n(22);g=(g=c("useShouldShowPlaybackErrorFallback")(a,null))!=null?g:!1;i=(i=c("useShouldShowUnsupportedCodecFallback")(a,null))!=null?i:!1;var m=c("useMWV2MediaViewerSecurePlayableUrl")();if(g){j[0]!==f?(g=f===!0?o.jsxs(o.Fragment,{children:[o.jsx(c("BaseMiddot.react"),{}),h._("__JHASH__oeuG9Vbyh2c__JHASH__")]}):null,j[0]=f,j[1]=g):g=j[1];j[2]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._("__JHASH__9pTPm1txftc__JHASH__"),j[2]=f):f=j[2];j[3]!==g?(f={deliveryStatus:g,downloadButton:null,mediaStatusText:f,retryButton:null},j[3]=g,j[4]=f):f=j[4];return f}if(i){g=(k||(k=d("I64"))).equal(a.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO));f=k.equal(a.attachmentType,l.ofNumber(c("MessagingAttachmentType").AUDIO));if(g){j[5]===Symbol["for"]("react.memo_cache_sentinel")?(i=o.jsx(c("BaseMiddot.react"),{}),j[5]=i):i=j[5];j[6]!==m||j[7]!==a?(g=m(a,"MAWVideoAudioPlaybackErrorHandlerUtils"),j[6]=m,j[7]=a,j[8]=g):g=j[8];j[9]===Symbol["for"]("react.memo_cache_sentinel")?(m=h._("__JHASH__3MspJ4rRDaT__JHASH__"),j[9]=m):m=j[9];j[10]!==g?(a=o.jsxs(o.Fragment,{children:[i,o.jsx(c("MWXLink.react"),{download:!0,href:g,children:m})]}),j[10]=g,j[11]=a):a=j[11];i=a;j[12]===Symbol["for"]("react.memo_cache_sentinel")?(m=h._("__JHASH__-Hi1PFpXdXk__JHASH__"),j[12]=m):m=j[12];j[13]!==i?(g={deliveryStatus:null,downloadButton:i,mediaStatusText:m,retryButton:null},j[13]=i,j[14]=g):g=j[14];return g}if(f){j[15]===Symbol["for"]("react.memo_cache_sentinel")?(a={deliveryStatus:null,downloadButton:null,mediaStatusText:h._("__JHASH__x5Yq4cFsR_G__JHASH__"),retryButton:null},j[15]=a):a=j[15];return a}}j[16]!==b||j[17]!==e?(m=b?o.jsxs(o.Fragment,{children:[o.jsx(c("BaseMiddot.react"),{}),o.jsx(c("MWXLink.react"),{onClick:e,children:h._("__JHASH__BGxC_0TtXwE__JHASH__")})]}):null,j[16]=b,j[17]=e,j[18]=m):m=j[18];i=m;j[19]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._("__JHASH__jCbL2nmLvOs__JHASH__"),j[19]=g):g=j[19];j[20]!==i?(f={deliveryStatus:null,downloadButton:null,mediaStatusText:g,retryButton:i},j[20]=i,j[21]=f):f=j[21];return f}function b(a){var b=n(8),e=(j||(j=c("useReStore")))(),g;b[0]!==e.tables.attachments||b[1]!==a.threadKey||b[2]!==a.messageId?(g=function(){return d("ReQL").fromTableAscending(e.tables.attachments).getKeyRange(a.threadKey,a.messageId)},b[0]=e.tables.attachments,b[1]=a.threadKey,b[2]=a.messageId,b[3]=g):g=b[3];var h;b[4]!==e||b[5]!==a?(h=[e,a],b[4]=e,b[5]=a,b[6]=h):h=b[6];g=d("ReQLSuspense").useFirst(g,h,f.id+":158");h=c("useMAWMediaValidationResultState")(g);if(g==null)return!1;g=(k||(k=d("I64"))).equal(g.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))||(k||(k=d("I64"))).equal(g.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO));if(!g)return!1;h=(g=h)!=null?g:{};g=h.mimeType;if(g!=="invalid-mp4")return!1;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(h=p(),b[7]=h):h=b[7];return h}g.isPlaybackErrorFallbackEnabled=p;g.useGetMetadataForMediaNotRendered=a;g.useShouldHideOutgoingErrorStatus=b}),226);